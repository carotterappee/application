<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>HP+ - Apprentissage de langues</title>
  <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700&family=Syne:wght@700;800&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="css/style.css?v=guest-pills-1" />
  <noscript><style>#loader{display:none!important}.fade{opacity:1!important;transform:none!important}</style></noscript>
</head>
<body class="preload">
  <!-- Loader luge -->
  <div id="loader" aria-hidden="true">
    <div class="loader-track">
      <svg class="sled-svg" viewBox="0 0 420 180" role="img" aria-label="Chat en luge">
        <!-- (SVG complet comme d√©j√† int√©gr√©) -->
      </svg>
    </div>
    <div class="loading-label">Loading‚Ä¶</div>
  </div>

  <!-- Header -->
  <header class="topbar">
    <div class="brand">HP+</div>
  </header>

  <!-- Accueil -->
  <main id="heroCenter" class="fade">
    <section id="welcome" class="welcome-card">
      <div class="hero-mascot">
        <!-- (SVG mascotte chat d√©j√† int√©gr√©) -->
      </div>
      <div class="hero-text">
        <h1>Bonjour, bienvenue sur HP+</h1>
        <p>Apprends les langues pas √† pas.</p>
        <div class="btn-row">
          <button onclick="goToPage('login')">Se connecter</button>
          <button onclick="goToPage('signup')">Cr√©er un compte</button>
          <button class="ghost" onclick="guestMode()">Continuer en invit√©</button>
        </div>
      </div>
    </section>
  </main>

  <!-- PANNEAUX -->
  <section id="panel-login" class="panel">
    <div class="panel-card">
      <h2>Connexion</h2>
      <p class="helper">Ravi de te revoir</p>
      <div class="form">
        <input type="email" placeholder="Email" autocomplete="email" />
        <input type="password" placeholder="Mot de passe" autocomplete="current-password" />
      </div>
      <div class="actions">
        <button onclick="redirectDashboard()">Connexion</button>
        <span class="spacer"></span>
        <button class="ghost" onclick="closePanel()">‚Üê Retour</button>
      </div>
    </div>
  </section>

  <section id="panel-signup" class="panel">
    <div class="panel-card">
      <h2>Cr√©er un compte</h2>
      <p class="helper">Bienvenue dans l‚Äôaventure HP+ ‚ú®</p>
      <div class="form">
        <input type="text" placeholder="Pr√©nom" autocomplete="given-name" />
        <input type="text" placeholder="Nom" autocomplete="family-name" />
        <input type="text" placeholder="Surnom (optionnel)" />
        <input type="email" placeholder="Email" autocomplete="email" />
        <input type="password" placeholder="Mot de passe" autocomplete="new-password" />
      </div>
      <div class="actions">
        <button onclick="redirectDashboard()">Cr√©er mon compte</button>
        <span class="spacer"></span>
        <button class="ghost" onclick="closePanel()">‚Üê Retour</button>
      </div>
    </div>
  </section>

  <section id="panel-guest" class="panel">
    <div class="panel-card">
      <h2>Choisis tes langues</h2>
      <p class="helper">Tu peux commencer en mode invit√©. Ton avanc√©e restera locale.</p>

      <div class="form">
        <label>Langue(s) parl√©e(s)</label>
        <!-- Pills cliquables -->
        <div class="lang-pills" role="group" aria-label="Langue(s) parl√©e(s)">
          <input class="pill-input" type="checkbox" id="lp-fr" value="Fran√ßais"><label class="pill" for="lp-fr">Fran√ßais</label>
          <input class="pill-input" type="checkbox" id="lp-en" value="English"><label class="pill" for="lp-en">English</label>
          <input class="pill-input" type="checkbox" id="lp-es" value="Espa√±ol"><label class="pill" for="lp-es">Espa√±ol</label>
          <input class="pill-input" type="checkbox" id="lp-de" value="Deutsch"><label class="pill" for="lp-de">Deutsch</label>
          <input class="pill-input" type="checkbox" id="lp-it" value="Italiano"><label class="pill" for="lp-it">Italiano</label>
          <input class="pill-input" type="checkbox" id="lp-pt" value="Portugu√™s"><label class="pill" for="lp-pt">Portugu√™s</label>
        </div>

        <label>Langue √† apprendre</label>
        <div class="select">
          <select id="learn-lang">
            <option>Fran√ßais</option>
            <option>English</option>
            <option>Espa√±ol</option>
            <option>Deutsch</option>
            <option>Italiano</option>
            <option>Portugu√™s</option>
          </select>
        </div>
      </div>

      <div class="actions">
        <button onclick="redirectDashboard()">Continuer</button>
        <span class="spacer"></span>
        <button class="ghost" onclick="closePanel()">‚Üê Retour</button>
      </div>
    </div>
  </section>

  <section id="panel-level" class="panel">
    <div class="panel-card">
      <h2>Ton point de d√©part</h2>
      <p class="helper">On s‚Äôadapte √† ton niveau.</p>
      <div class="actions" style="gap:10px; flex-wrap: wrap;">
        <button onclick="redirectDashboard()">Je suis d√©butant(e)</button>
        <button onclick="redirectDashboard()">J‚Äôai d√©j√† des bases</button>
        <span class="spacer"></span>
        <button class="ghost" onclick="closePanel()">‚Üê Retour</button>
      </div>
    </div>
  </section>

  <!-- JS -->
  <script>
    // Loader -> Hero
    function showHero(){
      const loader = document.getElementById('loader');
      const hero = document.getElementById('heroCenter');
      if (loader) loader.classList.add('hide');
      document.body.classList.remove('preload');
      if (hero) hero.classList.add('show');
    }
    window.addEventListener('load', ()=> setTimeout(showHero, 1800));
    setTimeout(showHero, 3500); // filet de s√©curit√©

    // Panneaux
    function openPanel(id){
      document.body.classList.add('panel-open');
      document.querySelectorAll('.panel').forEach(p=>p.classList.remove('active'));
      document.getElementById(id)?.classList.add('active');
      window.scrollTo({top:0, behavior:'instant'});
    }
    function closePanel(){
      document.querySelectorAll('.panel').forEach(p=>p.classList.remove('active'));
      document.body.classList.remove('panel-open');
      const hero = document.getElementById('heroCenter');
      requestAnimationFrame(()=> hero.classList.add('show'));
    }

    // Compat boutons accueil
    function goToPage(id){
      if(id==='login'){ openPanel('panel-login'); return; }
      if(id==='signup'){ openPanel('panel-signup'); return; }
    }
    function guestMode(){ 
      // Redirection direct tableau de bord
      window.location.href = "dashboard.html"; 
    }

    // R√©cup√©ration langues invit√© (non utilis√© car redirection directe maintenant)
    function saveGuestLanguages(){
      const spoken = [...document.querySelectorAll('.lang-pills .pill-input:checked')].map(i=>i.value);
      const learning = document.getElementById('learn-lang').value;

      if(spoken.length === 0){
        alert("Choisis au moins une langue parl√©e üôÇ");
        return;
      }
      console.log('Langues parl√©es:', spoken);
      console.log('Langue √† apprendre:', learning);

      redirectDashboard();
    }

    // Redirection vers dashboard
    function redirectDashboard(){
      window.location.href = "dashboard.html";
    }
  </script>
</body>
</html>
